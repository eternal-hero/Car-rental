{"version":3,"sources":["history.js","auth/FetchInterceptor.js","services/JwtAuthService.js","views/auth-views/components/LoginForm.js","views/auth-views/authentication/login-1/index.js"],"names":["history","service","axios","create","baseURL","API_BASE_URL","timeout","ENTRY_ROUTE","interceptors","request","use","config","jwtToken","localStorage","getItem","AUTH_TOKEN","headers","push","window","location","reload","error","notification","message","Promise","reject","response","data","notificationParam","status","description","removeItem","JwtAuthService","fetch","url","method","LoginForm","props","useHistory","showForgetPassword","hideAuthMessage","onForgetPasswordClick","showLoading","extra","loading","showMessage","authenticated","showAuthMessage","token","redirect","allowRedirect","signOut","useEffect","setTimeout","div","initial","opacity","marginBottom","animate","type","showIcon","layout","name","onFinish","values","console","log","login","then","resp","setItem","access_token","e","catch","err","Item","label","rules","required","prefix","className","onClick","Password","htmlType","block","defaultProps","otherSignIn","mapDispatchToProps","connect","auth","backgroundStyle","backgroundImage","backgroundRepeat","backgroundSize","LoginOne","theme","useSelector","state","currentTheme","style","justify","xs","sm","md","lg","src","alt"],"mappings":"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","file":"static/js/22.23ea741a.chunk.js","sourcesContent":["import * as history from 'history';\r\n\r\nexport default history.createBrowserHistory();","import axios from 'axios'\r\nimport { API_BASE_URL } from 'configs/AppConfig'\r\nimport history from '../history'\r\nimport { AUTH_TOKEN } from 'redux/constants/Auth'\r\nimport { notification } from 'antd';\r\n\r\nconst service = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 60000\r\n})\r\n\r\n// Config\r\nconst ENTRY_ROUTE = '/auth/login'\r\n// const TOKEN_PAYLOAD_KEY = 'authorization'\r\nconst TOKEN_PAYLOAD_KEY = 'Authorization'\r\nconst PUBLIC_REQUEST_KEY = 'public-request'\r\n\r\n// API Request interceptor\r\nservice.interceptors.request.use(config => {\r\n\tconst jwtToken = localStorage.getItem(AUTH_TOKEN)\r\n\t\r\n  if (jwtToken) {\r\n    config.headers[TOKEN_PAYLOAD_KEY] = \"bearer \" + jwtToken\r\n  }\r\n\r\n  if (!jwtToken && !config.headers[PUBLIC_REQUEST_KEY]) {\r\n\t\thistory.push(ENTRY_ROUTE)\r\n\t\twindow.location.reload();\r\n  }\r\n\r\n  return config\r\n}, error => {\r\n\t// Do something with request error here\r\n\tnotification.error({\r\n\t\tmessage: 'Error'\r\n\t})\r\n  Promise.reject(error)\r\n})\r\n\r\n// API respone interceptor\r\nservice.interceptors.response.use( (response) => {\r\n\treturn response.data\r\n}, (error) => {\r\n\r\n\tlet notificationParam = {\r\n\t\tmessage: ''\r\n\t}\r\n\t\r\n\t// Remove token and redirect \r\n\tif (error.response.status === 400 || error.response.status === 403) {\r\n\t\tnotificationParam.message = 'Authentication Fail'\r\n\t\tnotificationParam.description = 'Please login again'\r\n\t\tlocalStorage.removeItem(AUTH_TOKEN)\r\n\t\thistory.push(ENTRY_ROUTE)\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\tif (error.response.status === 404) {\r\n\t\tnotificationParam.message = 'Not Found'\r\n\t}\r\n\r\n\tif (error.response.status === 500) {\r\n\t\tnotificationParam.message = 'Internal Server Error'\r\n\t}\r\n\t\r\n\tif (error.response.status === 508) {\r\n\t\tnotificationParam.message = 'Time Out'\r\n\t}\r\n\r\n\tnotification.error(notificationParam)\r\n\r\n\treturn Promise.reject(error);\r\n});\r\n\r\nexport default service","import fetch from 'auth/FetchInterceptor'\r\n\r\nconst JwtAuthService = {}\r\n\r\nJwtAuthService.login = function (data) {\r\n\treturn fetch({\r\n\t\turl: '/login',\r\n\t\tmethod: 'post',\r\n\t\theaders: {\r\n\t\t\t'public-request': 'true'\r\n\t\t},\r\n\t\t\tdata: data\r\n\t\t})\r\n}\r\n\r\n// JwtAuthService.signUp = function (data) {\r\n// \treturn fetch({\r\n// \t\turl: '/auth/signup',\r\n// \t\tmethod: 'post',\r\n// \t\theaders: {\r\n//       'public-request': 'true'\r\n//     },\r\n// \t\tdata: data\r\n// \t})\r\n// }\r\n\r\nexport default JwtAuthService","import React, { useEffect } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { Button, Form, Input, Divider, Alert } from \"antd\";\r\nimport { MailOutlined, LockOutlined } from '@ant-design/icons';\r\nimport PropTypes from 'prop-types';\r\nimport {  \r\n\tshowLoading, \r\n\tshowAuthMessage, \r\n\thideAuthMessage,\r\n\tauthenticated,\r\n\tsignOut\r\n} from 'redux/actions/Auth';\r\nimport {\r\n\tAUTH_TOKEN\r\n} from 'redux/constants/Auth';\r\nimport JwtAuthService from 'services/JwtAuthService'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\"\r\n\r\nexport const LoginForm = (props) => {\r\n\tlet history = useHistory();\r\n\r\n\tconst { \r\n\t\tshowForgetPassword, \r\n\t\thideAuthMessage,\r\n\t\tonForgetPasswordClick,\r\n\t\tshowLoading,\r\n\t\textra,\r\n\t\tloading,\r\n\t\tshowMessage,\r\n\t\tmessage,\r\n\t\tauthenticated,\r\n\t\tshowAuthMessage,\r\n\t\ttoken,\r\n\t\tredirect,\r\n\t\tallowRedirect,\r\n\t\tsignOut\r\n\t} = props\r\n\r\n\tconst onLogin = values => {\r\n\t\tconsole.log(\"loading = \", props);\r\n\t\tshowLoading()\r\n\t\tconst fakeToken = 'fakeToken'\r\n\t\tJwtAuthService.login(values).then(resp => {\r\n\t\t\tlocalStorage.setItem(AUTH_TOKEN, resp.access_token);\r\n\t\t\tauthenticated(resp.access_token)\r\n\t\t}).then(e => {\r\n\t\t\tshowAuthMessage(e)\r\n\t\t}).catch(err => {\r\n\t\t\tsignOut();\r\n\t\t})\r\n\t};\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif (token !== null && allowRedirect) {\r\n\t\t\thistory.push(redirect)\r\n\t\t}\r\n\t\tif(showMessage) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\thideAuthMessage();\r\n\t\t}, 3000);\r\n\t\t}\r\n\t});\r\n\t\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<motion.div \r\n\t\t\t\tinitial={{ opacity: 0, marginBottom: 0 }} \r\n\t\t\t\tanimate={{ \r\n\t\t\t\t\topacity: showMessage ? 1 : 0,\r\n\t\t\t\t\tmarginBottom: showMessage ? 20 : 0 \r\n\t\t\t\t}}> \r\n\t\t\t\t<Alert type=\"error\" showIcon message={message}></Alert>\r\n\t\t\t</motion.div>\r\n\t\t\t<Form \r\n\t\t\t\tlayout=\"vertical\" \r\n\t\t\t\tname=\"login-form\"\r\n\t\t\t\tonFinish={onLogin}\r\n\t\t\t>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"name\" \r\n\t\t\t\t\tlabel=\"Username\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Please input username',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// { \r\n\t\t\t\t\t\t// \ttype: 'email',\r\n\t\t\t\t\t\t// \tmessage: 'Please enter a validate email!'\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input prefix={<MailOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"password\" \r\n\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t<div className={`${showForgetPassword? 'd-flex justify-content-between w-100 align-items-center' : ''}`}>\r\n\t\t\t\t\t\t\t<span>Password</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tshowForgetPassword && \r\n\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\tonClick={() => onForgetPasswordClick} \r\n\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer font-size-sm font-weight-normal text-muted\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tForget Password?\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t} \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Please input your password',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Input.Password prefix={<LockOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" block loading={loading}>\r\n\t\t\t\t\t\tSign In\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t{ extra }\r\n\t\t\t</Form>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nLoginForm.propTypes = {\r\n\totherSignIn: PropTypes.bool,\r\n\tshowForgetPassword: PropTypes.bool,\r\n\textra: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.element\r\n\t]),\r\n};\r\n\r\nLoginForm.defaultProps = {\r\n\totherSignIn: true,\r\n\tshowForgetPassword: false\r\n};\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n\tconst {loading, message, showMessage, token, redirect} = auth;\r\n  \treturn {loading, message, showMessage, token, redirect}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tshowAuthMessage,\r\n\tshowLoading,\r\n\thideAuthMessage,\r\n\tauthenticated,\r\n\tsignOut\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\r\n","import React from 'react'\r\nimport LoginForm from '../../components/LoginForm'\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst backgroundStyle = {\r\n\tbackgroundImage: 'url(/img/others/img-17.jpg)',\r\n\tbackgroundRepeat: 'no-repeat',\r\n\tbackgroundSize: 'cover'\r\n}\r\n\r\nconst LoginOne = props => {\r\n\tconst theme = useSelector(state => state.theme.currentTheme)\r\n\treturn (\r\n\t\t<div className=\"h-100\" style={backgroundStyle}>\r\n\t\t\t<div className=\"container d-flex flex-column justify-content-center h-100\">\r\n\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t<Col xs={20} sm={20} md={20} lg={7}>\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<div className=\"my-4\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={`/img/${theme === 'light' ? 'logo.png': 'logo-white.png'}`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t{/* <p>Don't have an account yet? <a href=\"/auth/register-1\">Sign Up</a></p> */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={20} lg={20}>\r\n\t\t\t\t\t\t\t\t\t\t<LoginForm {...props} />\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LoginOne\r\n"],"sourceRoot":""}