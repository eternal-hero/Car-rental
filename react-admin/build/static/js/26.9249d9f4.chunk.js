(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[26],{463:function(e,t,a){"use strict";var n=a(470),r=a.n(n),s=a(19),i=a(472).a(),c=a(31),o=a(274),d=r.a.create({baseURL:s.a,timeout:6e4}),u="/auth/login";d.interceptors.request.use((function(e){var t=localStorage.getItem(c.b);return t&&(e.headers.Authorization="bearer "+t),t||e.headers["public-request"]||(i.push(u),window.location.reload()),e}),(function(e){o.a.error({message:"Error"}),Promise.reject(e)})),d.interceptors.response.use((function(e){return e.data}),(function(e){var t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(c.b),i.push(u),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),o.a.error(t),Promise.reject(e)}));t.a=d},467:function(e,t,a){},728:function(e,t,a){"use strict";a.r(t);var n=a(72),r=a(0),s=a.n(r),i=a(714),c=a(438),o=a(102),d=a(701),u=a(502),l=a.n(u),b=a(195),j=a(16),m=a(713),p=a(463),h=a(433),O=a(74),f=a(2),x=[{title:"ID",dataIndex:"id",key:1},{title:"Bank Name",dataIndex:"bank_name",key:2},{title:"Iban",dataIndex:"iban",key:3},{title:"Bank Number",dataIndex:"account_number",key:4},{title:"First Name",dataIndex:"first_name",key:5},{title:"Holder Name",dataIndex:"holder_name",key:6},{title:"Last Name",dataIndex:"last_name",key:7},{title:"Phone Number",dataIndex:"phone_number",key:8},{title:"Penalty",dataIndex:"penalty_amount",key:9},{title:"Earnings",dataIndex:"earnings",key:10}];function g(e){var t=Object(f.jsx)(O.a,{style:{fontSize:24},spin:!0}),a=Object(r.useState)([]),s=Object(n.a)(a,2),i=s[0],c=s[1],o=Object(r.useState)({}),d=Object(n.a)(o,2),u=d[0],l=d[1],g=Object(r.useState)(!1),_=Object(n.a)(g,2),v=_[0],y=_[1],k=Object(r.useState)(!1),D=Object(n.a)(k,2),I=D[0],N=D[1],S=function(t){N(!0),Object(p.a)({url:"/report/earners/get/all",method:"get",headers:{"public-request":"true"},params:t}).then((function(t){N(!1);var a=[],n={};t.data.users.map((function(e){n={key:e.id,id:e.id,bank_name:e.bank_name,iban:e.iban,account_number:e.account_number,first_name:e.first_name,holder_name:e.holder_name,last_name:e.last_name,phone_number:e.phone_number,penalty_amount:e.penalty_amount,earnings:e.earnings},a.push(n)})),c(a),e.getTableData(a)}))};Object(r.useEffect)((function(){void 0===e.startDate||void 0===e.searchText?S({page:1}):S({page:1,dates:e.startDate+","+e.endDate,search:e.searchText})}),[]),Object(r.useEffect)((function(){void 0===e.startDate?S({page:1}):S({page:1,dates:e.startDate+","+e.endDate,search:e.searchText})}),[e.startDate,e.endDate,e.searchText]),Object(r.useEffect)((function(){S({page:1})}),[]);return Object(f.jsx)(m.a,{columns:x,expandable:{expandedRowRender:function(e){return Object(f.jsx)("div",{style:{margin:0},children:Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"earing_detail_body",children:[v&&Object(f.jsx)(h.a,{indicator:t}),e.id in u&&u[e.id].map((function(e,t){return Object(f.jsxs)("div",{className:"earing_detail",style:{justifyContent:"space-between",padding:"10px 20px"},children:[Object(f.jsxs)("div",{className:"earing_detail",children:[Object(f.jsx)("div",{children:"trip ID"}),Object(f.jsx)("div",{children:e.id},t)]}),Object(f.jsxs)("div",{className:"earing_detail",children:[Object(f.jsx)("div",{children:"Owner Earings"}),Object(f.jsx)("div",{children:e.id},t)]}),Object(f.jsx)("div",{className:"earing_detail",children:Object(f.jsx)("button",{style:{padding:"5px 40px",borderRadius:5},children:"Unpayed"})})]},t)}))]})})})},onExpand:function(e,t){var a;1==e&&(y(!0),a=t.id,Object(p.a)({url:"/report/earners/"+a,method:"get",headers:{"public-request":"true"}}).then((function(e){y(!1),console.log(e),console.log(e.trips),l(Object(j.a)(Object(j.a)({},u),{},Object(b.a)({},a,e.trips)))})))}},dataSource:i,loading:I})}a(467);var _=a(476);a(487),a(488),i.a.RangePicker,c.a.Search,t.default=function(){var e=Object(r.useState)(null),t=Object(n.a)(e,2),a=t[0],i=(t[1],Object(r.useState)()),c=Object(n.a)(i,2),u=c[0],b=c[1],j=Object(r.useState)(),m=Object(n.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(),x=Object(n.a)(O,2),v=x[0],y=(x[1],Object(r.useState)([])),k=Object(n.a)(y,2),D=k[0],I=k[1];Object(r.useEffect)((function(){null===a?(b("1900-01-01"),h("2999-01-01")):(b(l()(a[0]).format("YYYY-MM-DD")),h(l()(a[1]).format("YYYY-MM-DD")))}),[a]);return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)("div",{className:"CarBtn",children:Object(f.jsx)(o.a,{type:"default",icon:Object(f.jsx)(d.a,{}),onClick:function(){return function(){var e=new _.default("portrait","pt","A4");e.setFontSize(15);var t={startY:50,head:[["ID","BankName","Earnings","FirstName","LastName","iban","holder_name","penalty_amount","phone_number"]],body:D.map((function(e){return[e.key,e.bank_name,e.earnings,e.first_name,e.last_name,e.iban,e.holder_name,e.penalty_amount,e.phone_number]}))};e.text("Cars List",40,40),e.autoTable(t),e.save("report.pdf")}()},children:"PDF"})}),Object(f.jsx)("div",{className:"earning_table",children:Object(f.jsx)(g,{startDate:u,endDate:p,searchText:v,getTableData:function(e){I(e)}})})]})}}}]);
//# sourceMappingURL=26.9249d9f4.chunk.js.map